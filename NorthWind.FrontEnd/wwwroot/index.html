<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Sistema de Facturación</title>
    <link rel="stylesheet" href="css/style.css">
</head>
<body>

    <!-- =======================
         NAVBAR SUPERIOR
    ======================== -->
    <nav class="navbar">
        <ul>
            <li><a href="#" id="navDashboard">Dashboard</a></li>
            <li><a href="#" id="navFacturacion">Facturación</a></li>
            <li><a href="#" id="navVerFacturas">Ver Facturas</a></li>
        </ul>

        <button class="btn-nueva-orden" id="btnNuevaOrden">🛒 Nueva Orden 📦</button>
    </nav>

    <!-- =======================
         SECCIÓN: DASHBOARD
    ======================== -->
    <section id="dashboard" class="seccion">
        <h1>Bienvenido al Sistema de Facturación</h1>
        <p>Seleccione una opción en el menú para comenzar.</p>
    </section>

    <!-- =======================
         SECCIÓN: FACTURACIÓN
    ======================== -->
    <section id="facturacion" class="seccion" style="display:none;">
        <div class="facturacion">
            <h1>Facturación</h1>

            <div class="factura-info">
                <span><strong>ID Factura:</strong> <span id="facturaId">...</span></span>
                <p><strong>Fecha:</strong> <span id="facturaFecha">---</span></p>
                <p><strong>Hora:</strong> <span id="facturaHora">---</span></p>
            </div>

            <!-- Maestro Cliente -->
            <div class="maestro-cliente">
                <strong>Cliente: </strong>

                <input type="text" id="clienteId" placeholder="Cédula del cliente" readonly>
                <input type="text" id="clienteNombre" placeholder="Nombres del cliente" readonly>
                <input type="text" id="clienteEmail" placeholder="Email del cliente" readonly>

                <button id="btnBuscarCliente">🔍 Buscar Cliente</button>
            </div>

            <!-- Datos de envío -->
            <div class="envio-container" hidden>
                <h3>Datos de Envío</h3>

                <label>Dirección:</label>
                <input type="text" id="shipAddress" style="width: 300px;" placeholder="Ej: Av. Amazonas 1234">

                <label>Ciudad:</label>
                <input type="text" id="shipCity" placeholder="Ej: Pelileo">

                <label>País:</label>
                <input type="text" id="shipCountry" placeholder="Ej: Ecuador">

                <label>Código Postal:</label>
                <input type="text" id="shipPostalCode" placeholder="Ej: 170143">
            </div>

            <!-- Productos -->
            <div class="detalle-productos">
                <!-- Panel Auxiliar -->
                <div id="panelProducto" class="panel-aux" style="display:none;">
                    <h3>Agregar Producto</h3>

                    <label>ID Producto:</label>
                    <input type="text" id="auxProductId" readonly>

                    <label>Nombre:</label>
                    <input type="text" id="auxProductName" style="width: 300px;" readonly>

                    <label>Precio Unitario (IVA 15%):</label>
                    <input type="text" id="auxUnitPrice" readonly>

                    <label hidden>Precio Base:</label>
                    <input type="text" id="auxbasePrice" readonly hidden>

                    <label>Stock Disponible:</label>
                    <input type="text" id="auxStock" readonly>

                    <label>Cantidad:</label>
                    <input type="number" id="auxQuantity" min="1" value="1">

                    <button id="btnConfirmarAgregar">🏷️ Agregar a la tabla</button>
                </div>

                <div class="productos-header">
                    <h3>Productos</h3>
                    <div class="boton-container">
                        <button id="btnAgregarProducto">🏷️ Buscar Producto</button>
                    </div>
                </div>



                <table id="tablaProductos">
                    <thead>
                        <tr>
                            <th>ID Producto</th>
                            <th>Producto</th>
                            <th>Precio (IVA 15%)</th>
                            <th hidden>Precio base</th>
                            <th>Cantidad</th>
                            <th>Subtotal (IVA 15%)</th>
                            <th hidden>Subtotal Base</th>
                            <th>Acción</th>
                        </tr>
                    </thead>
                    <tbody></tbody>
                </table>
            </div>

            <div class="total-factura">
                <strong>Subtotal: $<span id="subTotalFactura">0.00</span></strong><br>
                <strong>IVA: $<span id="ivaFactura">0.00</span></strong><br>
                <strong>Total: $<span id="totalFactura">0.00</span></strong>
            </div>

                <!--<div class="total-factura">
            <strong>Total: $<span id="totalFactura">0.00</span></strong>
        </div>-->

            <div class="boton-container">
                <button id="btnGuardar">🧾 Guardar Orden</button>
            </div>
        </div>
</section>

    <!-- =======================
         SECCIÓN: VER FACTURAS
    ======================== -->
    <section id="verFacturas" class="seccion" style="display:none;">
        <h1>Facturas Registradas</h1>

        <div class="buscadorInteligente">
            <input type="text" id="buscarFactura" placeholder="Buscar por ID, Cédula o Ciudad">
        </div>

        <div class="paginacion-facturas">
            <button id="btnAnteriorFactura">Anterior</button>
            <span id="paginaActualFactura">Página 1</span>
            <button id="btnSiguienteFactura">Siguiente</button>
        </div>

        <table id="tablaFacturas">
            <thead>
                <tr>
                    <th>ID Factura</th>
                    <th>Cliente</th>
                    <th>Ciudad</th>
                    <th>Total ($)</th>
                    <th>Acción</th>
                </tr>
            </thead>
            <tbody></tbody>
        </table>
    </section>

    <!-- =======================
         MODAL CLIENTES
    ======================== -->
    <div id="modalClientes" class="modal">
        <div class="modal-content">
            <span class="close" id="cerrarModalClientes">&times;</span>
            <h2>Buscar Cliente</h2>
            <div class="buscadorInteligente">
                <input type="text" id="buscarCliente" placeholder="Buscar por Cédula, Nombre, Apellido o Email">
            </div>

            <button hidden id="btnBuscarClienteModal">🔍 Buscar</button>
            <button hidden id="btnVerTodosClientes">📋 Ver todos</button>

            <div class="paginacion-clientes">
                <button id="btnAnteriorCliente">⬅ Anterior</button>
                <span id="paginaActualCliente">Página 1</span>
                <button id="btnSiguienteCliente">Siguiente ➡</button>
            </div>

            <table id="tablaClientes">
                <thead>
                    <tr>
                        <th>Cédula</th>
                        <th>Nombres</th>
                        <th>Dirección</th>
                        <th>Email</th>
                        <th>Teléfono</th>
                        <th>Acción</th>
                    </tr>
                </thead>
                <tbody></tbody>
            </table>
        </div>
    </div>

    <!-- =======================
         MODAL PRODUCTOS
    ======================== -->
    <div id="modalProductos" class="modal">
        <div class="modal-content">
            <span class="close" id="cerrarModalProductos">&times;</span>
            <h2>Búsqueda de Productos</h2>
            <div class="buscadorInteligente">
                <input type="text" id="buscarProducto" placeholder="Buscar por ID o Nombre">
            </div>
            <button hidden id="btnBuscarProductoModal">🔍 Buscar</button>
            <button hidden id="btnVerTodosProductos">📋 Ver Todos</button>

            <div class="paginacion-productos">
                <button id="btnAnteriorProducto">⬅ Anterior</button>
                <span id="paginaActualProducto">Página 1</span>
                <button id="btnSiguienteProducto">Siguiente ➡</button>
            </div>

            <table id="tablaProductosModal">
                <thead>
                    <tr>
                        <th>ID</th>
                        <th>Nombre</th>
                        <th>Precio</th>
                        <th>Stock</th>
                        <th>Acción</th>
                    </tr>
                </thead>
                <tbody></tbody>
            </table>
        </div>
    </div>

    <!-- =======================
         MODAL DETALLE FACTURA
    ======================= -->
    <div id="modalFactura" class="modal">
        <div class="modal-content" style="height: auto;>
            <span class="close" id="cerrarModalFactura">&times;</span>
            <h2>Detalle de Factura</h2>

            <div id="infoFactura">
                <p><strong>ID Factura:</strong> <span id="idFact"></span></p>
                <p><strong>Fecha Emisión:</strong> <span id="factFecha"></span></p>
                <p><strong>Cliente:</strong> <span id="factCliente"></span></p>
                <p><strong>CI/RUC:</strong> <span id="factClienteCI"></span></p>
                <p><strong>Email:</strong> <span id="factClienteEmail"></span></p>
                <p><strong>Télefono:</strong> <span id="factClienteTel"></span></p>
                <p><strong>Dirección:</strong> <span id="factDireccion"></span></p>
                <p hidden><strong>Ciudad:</strong> <span id="factCiudad"></span></p>
                <p hidden><strong>País:</strong> <span id="factPais"></span></p>
                <p hidden><strong>Código postal:</strong> <span id="factPostal"></span></p>
            </div>

            <table id="tablaDetalleFactura">
                <thead>
                    <tr>
                        <th>ID Producto</th>
                        <th>Producto</th>
                        <th>Precio Unitario (IVA 15%)</th>
                        <th>Cantidad</th>
                        <th>Subtotal (IVA 15%)</th>
                        <th hidden>Precio Unitario Base</th>
                        <th hidden>Subtotal Base</th>
                    </tr>
                </thead>
                <tbody></tbody>
            </table>

            <div style="text-align:right; margin-top:10px;">
                <strong>Subtotal: $<span id="factSubTotal">0.00</span></strong><br/>
                <strong>IVA (15%): $<span id="factTotalIva">0.00</span></strong><br />
                <strong>Total: $<span id="factTotal">0.00</span></strong>
            </div>
        </div>
    </div>


    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11.26.3/dist/sweetalert2.all.min.js" integrity="sha256-1cQTGybAoN6zAsKD5JCu5ui/YwHtGj1LYrRpN5uIsyA=" crossorigin="anonymous"></script>
    <script src="js/app.js"></script>
    <script src="js/validaciones.js"></script>
    <script src="js/facturas.js"></script>
</body>
</html>